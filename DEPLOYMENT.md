# Deployment Guide for HomeVerse

## Prerequisites
- GitHub repository
- Render account (https://render.com)
- Mapbox API token
- OpenAI API key (for AI features)

## Environment Variables Required

### Backend (homeverse-api)
- `DATABASE_URL` - PostgreSQL connection string (auto-generated by Render)
- `REDIS_URL` - Redis connection string (auto-generated by Render)
- `JWT_SECRET_KEY` - JWT signing secret (auto-generated by Render)
- `OPENAI_API_KEY` - Your OpenAI API key
- `SENDGRID_API_KEY` - (Optional) For email notifications
- `UNSTRUCTURED_API_KEY` - (Optional) For document processing

### Frontend (homeverse-frontend)
- `NEXT_PUBLIC_API_URL` - Backend API URL (e.g., https://homeverse-api.onrender.com)
- `NEXT_PUBLIC_MAPBOX_TOKEN` - Your Mapbox API token

## Deployment Steps

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Prepare for Render deployment"
   git push origin main
   ```

2. **Deploy on Render**
   - Log in to Render Dashboard
   - Click "New +" â†’ "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect the `render.yaml` file
   - Review the services and click "Apply"

3. **Configure Environment Variables**
   - Go to each service dashboard
   - Navigate to "Environment" tab
   - Add the required environment variables listed above

4. **Wait for Deployment**
   - Backend API will build and start first
   - Frontend will build after
   - Database and Redis will be provisioned automatically

5. **Verify Deployment**
   - Backend: https://homeverse-api.onrender.com/health
   - Frontend: https://homeverse-frontend.onrender.com

## Post-Deployment

1. **Update Frontend API URL**
   - Ensure frontend's `NEXT_PUBLIC_API_URL` points to your backend URL
   - Redeploy if needed

2. **Test Authentication**
   - Use the test accounts from TEST_LOGINS.md
   - Verify all portals are accessible

3. **Monitor Services**
   - Check Render dashboard for logs
   - Monitor service health and performance

## Troubleshooting

- **Build Failures**: Check build logs in Render dashboard
- **Connection Issues**: Verify environment variables are set correctly
- **Database Issues**: Ensure PostgreSQL version is 15+
- **CORS Issues**: Backend is configured to accept all origins in production